<!-- --- START OF FILE Verification session User Updated (Ad Control + Msg).html --- -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Fworker Premium App</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        :root {
            --primary: #FFD700; /* Gold */
            --primary-dark: #C5A000;
            --bg: #F0F2F5;
            --card-bg: #FFFFFF;
            --text-main: #1F2937;
            --text-sec: #6B7280;
            --border: #E5E7EB;
            --shadow: 0 4px 20px rgba(0,0,0,0.05);
            --radius: 16px;
        }

        /* Dark Mode Variables */
        body.dark-mode {
            --bg: #111827;
            --card-bg: #1F2937;
            --text-main: #F9FAFB;
            --text-sec: #9CA3AF;
            --border: #374151;
            --shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: var(--text-main); padding-bottom: 90px; min-height: 100vh; transition: background 0.3s, color 0.3s; }

        /* --- Animations --- */
        @keyframes fadeIn { from{opacity:0; transform: translateY(10px);} to{opacity:1; transform: translateY(0);} }
        .animate-up { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        /* --- ADVERTISING BOX STYLES (Mobile Optimized) --- */
        .mobile-ad-container {
            width: 100%;
            max-width: 340px;
            margin: 15px auto;
            background: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 5px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            min-height: 60px;
        }
        body.dark-mode .mobile-ad-container {
            background: #1f2937;
            border-color: #374151;
            box-shadow: 0 2px 8px rgba(255,255,255,0.05);
        }
        .mobile-ad-container iframe { border: none; overflow: hidden; display: block; }

        /* --- Auth Screen --- */
        .full-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg); z-index: 2000; display: flex;
            flex-direction: column; justify-content: center; align-items: center; padding: 25px;
            overflow-y: auto;
        }
        .auth-card {
            background: var(--card-bg); width: 100%; max-width: 380px;
            padding: 30px; border-radius: 24px; box-shadow: var(--shadow);
            text-align: center; border: 1px solid var(--border); margin-bottom: 20px;
        }
        .auth-logo-img {
            max-width: 120px; max-height: 120px; object-fit: contain;
            margin-bottom: 15px; display: block; margin-left: auto; margin-right: auto;
        }
        .input-group { position: relative; margin-bottom: 15px; }
        .input-group i {
            position: absolute; left: 15px; top: 50%; transform: translateY(-50%);
            color: var(--text-sec); font-size: 1rem;
        }
        .form-control {
            width: 100%; padding: 14px 14px 14px 45px; 
            border: 1px solid var(--border);
            border-radius: 12px; background: var(--bg); color: var(--text-main); outline: none; font-size: 0.95rem;
        }
        .form-control:focus { border-color: var(--primary); border-width: 2px; }

        .btn-create-link {
            display: block; width: 100%; text-align: right;
            font-size: 0.85rem; color: #3B82F6; font-weight: 600;
            background: none; border: none; cursor: pointer;
            margin-top: -10px; margin-bottom: 15px;
        }
        .btn-create-link:hover { text-decoration: underline; }

        .btn {
            width: 100%; padding: 14px; border: none; border-radius: 12px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: #000; font-weight: 600; font-size: 1rem; cursor: pointer; 
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); transition: 0.2s; margin-top: 10px;
        }
        .btn:active { transform: scale(0.98); }
        .link-text { margin-top: 15px; font-size: 0.9rem; color: var(--text-sec); cursor: pointer; }
        .link-text span { color: var(--primary-dark); font-weight: 600; }

        .auth-footer { margin-top: 20px; width: 100%; max-width: 380px; text-align: center; }
        .auth-footer p { font-size: 0.8rem; color: var(--text-sec); margin-bottom: 10px; }
        .footer-btns { display: flex; justify-content: center; gap: 10px; }
        .footer-btn {
            background: transparent; border: 1px solid var(--border); color: var(--text-sec);
            padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; cursor: pointer;
        }
        .footer-btn:hover { background: var(--border); }

        /* --- Header & Profile --- */
        .app-header {
            background: var(--card-bg); padding: 20px; border-radius: 0 0 30px 30px;
            box-shadow: var(--shadow); position: relative; margin-bottom: 20px;
        }
        .header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .header-icons i { font-size: 1.4rem; cursor: pointer; margin-left: 15px; color: var(--text-main); position: relative; }
        
        .profile-container { display: flex; align-items: center; gap: 15px; }
        .profile-pic {
            width: 70px; height: 70px; border-radius: 50%; object-fit: cover;
            border: 3px solid var(--primary); padding: 2px; background: var(--card-bg);
        }
        .user-details h2 { font-size: 1.2rem; font-weight: 700; display: flex; align-items: center; gap: 5px; }
        .verified { color: #3B82F6; font-size: 0.9rem; }
        
        .sensitive-info {
            background: var(--bg); padding: 8px 12px; border-radius: 8px; margin-top: 5px;
            font-size: 0.8rem; color: var(--text-sec); display: flex; align-items: center; justify-content: space-between; gap: 10px;
        }
        .info-row { display: flex; flex-direction: column; }
        .hide-btn { cursor: pointer; color: var(--primary-dark); padding: 5px; }

        /* --- Components --- */
        .section-title { font-size: 1rem; font-weight: 600; margin: 25px 0 10px; padding: 0 5px; display: flex; align-items: center; gap: 8px; }
        .card {
            background: var(--card-bg); padding: 15px; border-radius: var(--radius);
            box-shadow: var(--shadow); border: 1px solid var(--border); margin-bottom: 15px;
        }

        .notice-container {
            background: var(--card-bg); border-radius: 12px; padding: 10px;
            box-shadow: var(--shadow); border: 1px solid var(--border); margin-bottom: 15px;
            position: relative; overflow: hidden;
        }
        .notice-badge {
            font-size: 0.7rem; font-weight: 700; background: var(--primary); color: #000;
            padding: 2px 8px; border-radius: 4px; text-transform: uppercase;
            display: inline-block; margin-bottom: 5px;
        }
        .marquee { white-space: nowrap; animation: scroll 15s linear infinite; font-size: 0.9rem; color: var(--text-main); }
        @keyframes scroll { 0% {transform: translateX(100%);} 100% {transform: translateX(-100%);} }

        .social-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        .social-item {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: var(--bg); padding: 12px 5px; border-radius: 12px; text-decoration: none;
            color: var(--text-main); font-size: 0.75rem; font-weight: 500; transition: 0.2s;
        }
        .social-item i { font-size: 1.5rem; margin-bottom: 5px; }
        .social-item:active { background: var(--border); transform: scale(0.95); }

        /* Sessions */
        .session-card {
            background: linear-gradient(135deg, #1F2937, #000); color: #fff;
            padding: 20px; border-radius: var(--radius); margin-bottom: 12px;
            display: flex; justify-content: space-between; align-items: center;
            position: relative; overflow: hidden; cursor: pointer;
        }
        .session-card::after {
            content: ''; position: absolute; right: -15px; bottom: -15px;
            width: 70px; height: 70px; background: var(--primary); opacity: 0.2; border-radius: 50%;
        }
        .session-info h3 { margin-bottom: 2px; }
        .session-earn { font-size: 0.85rem; color: var(--primary); font-weight: 600; background: rgba(255, 215, 0, 0.15); padding: 2px 8px; border-radius: 6px; display: inline-block; margin-top: 5px; }
        .play-icon { font-size: 2rem; color: var(--primary); z-index: 2; }

        .rules-content {
            font-size: 0.85rem; line-height: 1.6; color: var(--text-main);
            display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
            transition: all 0.3s ease;
        }
        .rules-content.expanded { -webkit-line-clamp: unset; overflow: visible; }
        .see-more-btn {
            display: block; width: 100%; text-align: center; margin-top: 10px;
            color: var(--primary-dark); font-size: 0.85rem; font-weight: 600;
            cursor: pointer; padding: 5px; background: var(--bg); border-radius: 6px;
        }

        .support-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .admin-card {
            background: var(--card-bg); border: 1px solid var(--border);
            padding: 15px; border-radius: 15px; text-align: center;
            box-shadow: var(--shadow); display: flex; flex-direction: column; align-items: center;
        }
        .admin-pic {
            width: 50px; height: 50px; border-radius: 50%; object-fit: cover;
            border: 2px solid var(--primary); margin-bottom: 8px;
        }
        .admin-name { font-weight: 600; font-size: 0.9rem; margin-bottom: 10px; color: var(--text-main); }
        .contact-btns { display: flex; gap: 8px; width: 100%; justify-content: center; }
        .c-btn {
            flex: 1; padding: 6px; border-radius: 8px; border: none; color: white;
            font-size: 1rem; cursor: pointer; display: flex; justify-content: center; align-items: center; text-decoration: none;
        }
        .btn-wa { background: #25D366; }
        .btn-tg { background: #0088cc; }

        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 70px;
            background: var(--card-bg); border-top: 1px solid var(--border);
            display: flex; justify-content: space-around; align-items: center; z-index: 1000;
            border-radius: 20px 20px 0 0; box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
        }
        .nav-item { text-align: center; color: var(--text-sec); font-size: 0.75rem; transition: 0.2s; cursor: pointer; }
        .nav-item i { font-size: 1.4rem; margin-bottom: 4px; display: block; }
        .nav-item.active { color: var(--primary-dark); }

        /* Modals */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 3000; padding: 20px; overflow-y: auto; justify-content: center; align-items: center;
        }
        .modal-content-box {
            background: var(--card-bg); width: 100%; max-width: 400px; 
            border-radius: 20px; padding: 20px; position: relative; margin: auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .modal-title { font-size: 1.4rem; font-weight: 700; }
        .close-btn { font-size: 1.5rem; cursor: pointer; padding: 5px; }
        
        #popup-content { text-align: center; }
        #popup-img { width: 100%; border-radius: 12px; margin-bottom: 15px; max-height: 200px; object-fit: cover; }
        #popup-desc { color: var(--text-sec); margin-bottom: 20px; font-size: 0.95rem; line-height: 1.5; }
        #info-body { color: var(--text-main); line-height: 1.6; font-size: 0.9rem; white-space: pre-wrap; }

        /* --- Personal Message Modal Style --- */
        .msg-icon { font-size: 3rem; color: var(--primary); margin-bottom: 10px; display: block; }
        .msg-img { width: 100%; border-radius: 12px; margin-bottom: 15px; max-height: 200px; object-fit: cover; display: none; }
        .msg-body { text-align: center; color: var(--text-main); font-size: 1rem; line-height: 1.6; font-weight: 500; margin-bottom: 20px; }
        .msg-title { font-size: 1.5rem; color: var(--primary-dark); margin-bottom: 10px; font-weight: 700; text-align: center; }

        .hide { display: none !important; }
        .toggle-switch { position: relative; display: inline-block; width: 50px; height: 26px; }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--primary); }
        input:checked + .slider:before { transform: translateX(24px); }

    </style>
</head>
<body>

    <!-- === 1. AUTH SCREENS === -->
    <div id="login-screen" class="full-screen">
        <div class="auth-card animate-up">
            <img src="https://via.placeholder.com/150" class="auth-logo-img" id="login-logo-img">
            <p id="login-desc-text" style="color:var(--text-sec); margin-bottom:20px; font-size:0.9rem;">Welcome back! Access your account.</p>
            
            <div class="input-group">
                <i class="fas fa-id-card"></i>
                <input type="text" id="log-fw" class="form-control" placeholder="Fworker Number">
            </div>
            <div class="input-group">
                <i class="fas fa-lock"></i>
                <input type="password" id="log-pass" class="form-control" placeholder="Password">
            </div>
            
            <button class="btn" onclick="userLogin()">Access Now</button>
            <div class="link-text" onclick="showRegister()">New User? <span>Create Account</span></div>
        </div>

        <div class="auth-footer animate-up">
            <p>Please follow our <span style="color:var(--primary-dark); cursor:pointer; font-weight:600;" onclick="showInfo('rules')">Rules</span> before joining.</p>
            <div class="footer-btns">
                <button class="footer-btn" onclick="showInfo('privacy')">Privacy Policy</button>
                <button class="footer-btn" onclick="showInfo('about')">About Us</button>
            </div>
        </div>
    </div>

    <div id="register-screen" class="full-screen hide">
        <div class="auth-card animate-up">
            <img src="https://via.placeholder.com/150" class="auth-logo-img" id="reg-logo-img">

            <h2 style="margin-bottom:10px;">Join Us</h2>
            <p style="color:var(--text-sec); margin-bottom:20px; font-size:0.85rem;">Fill the form to request access</p>
            
            <div class="input-group"><i class="fas fa-user"></i><input id="reg-name" class="form-control" placeholder="Full Name"></div>
            <div class="input-group"><i class="fas fa-id-card"></i><input id="reg-fw" class="form-control" placeholder="Fworker Number"></div>
            <div class="input-group"><i class="fas fa-envelope"></i><input type="email" id="reg-email" class="form-control" placeholder="Email Address"></div>
            <div class="input-group"><i class="fas fa-lock"></i><input type="password" id="reg-pass" class="form-control" placeholder="Password"></div>
            <div class="input-group"><i class="fas fa-wallet"></i><input id="reg-pay" class="form-control" placeholder="Payment Number (Bkash/Nagad)"></div>
            
            <div class="input-group" style="margin-bottom:5px;">
                <i class="fas fa-link"></i>
                <input id="reg-proof" class="form-control" placeholder="Screenshot Link (Proof)">
            </div>
            <button class="btn-create-link" onclick="createLink()">Link তৈরি করুন <i class="fas fa-external-link-alt"></i></button>
            
            <button class="btn" onclick="userRegister()">Submit Request</button>
            <div class="link-text" onclick="showLogin()">Already have account? <span>Login</span></div>
        </div>
        
        <div class="auth-footer animate-up">
            <p>By registering, you agree to our <span style="color:var(--primary-dark); cursor:pointer; font-weight:600;" onclick="showInfo('privacy')">Privacy Policy</span></p>
        </div>
    </div>

    <div id="pending-screen" class="full-screen hide">
        <div class="auth-card animate-up">
            <i class="fas fa-hourglass-half" style="font-size:3.5rem; color:var(--primary); margin-bottom:20px;"></i>
            <h2>Approval Pending</h2>
            <p style="color:var(--text-sec); margin:10px 0; font-size:0.9rem; line-height:1.5;">
                Your account is currently under review. Please wait for the admin to approve your request.
            </p>
            <button class="btn" onclick="location.reload()">Check Status</button>
        </div>
    </div>

    <!-- === 2. MAIN APP === -->
    <div id="main-app" class="hide">
        
        <div class="app-header">
            <div class="header-top">
                <div class="app-logo" style="font-size:1.2rem;">FW<span>orker</span></div>
                <div class="header-icons">
                    <i class="fas fa-bell" onclick="showPopup()"></i>
                    <i class="fas fa-cog" onclick="openSettings()"></i>
                </div>
            </div>
            
            <div class="profile-container">
                <img id="head-pic" src="https://via.placeholder.com/100" class="profile-pic">
                <div class="user-details" style="flex:1;">
                    <h2 id="head-name">User Name <i class="fas fa-check-circle verified"></i></h2>
                    
                    <div class="sensitive-info">
                        <div class="info-row">
                            <span id="display-email">user@email.com</span>
                            <span id="display-phone" style="font-weight:600; color:var(--primary-dark);">017XXXXXXXX</span>
                        </div>
                        <i class="fas fa-eye-slash hide-btn" onclick="toggleHide()"></i>
                    </div>
                </div>
            </div>
        </div>

        <div style="padding: 0 20px;">
            
            <div class="notice-container">
                <div class="notice-badge">NOTICE</div>
                <div class="marquee" id="notice-text">Welcome to Fworker Official App. Stay tuned for updates!</div>
            </div>

            <!-- AD ZONE 1 -->
            <div id="ad-zone-1" class="mobile-ad-container"></div>

            <div class="card">
                <div class="social-grid">
                    <a id="lnk-fb" href="#" class="social-item"><i class="fab fa-facebook" style="color:#1877F2"></i> Group</a>
                    <a id="lnk-tg" href="#" class="social-item"><i class="fab fa-telegram" style="color:#0088cc"></i> Channel</a>
                    <a id="lnk-pay" href="#" class="social-item"><i class="fas fa-receipt" style="color:#10B981"></i> Proof</a>
                    <a id="lnk-yt" href="#" class="social-item"><i class="fab fa-youtube" style="color:#EF4444"></i> Video</a>
                </div>
            </div>

            <!-- AD ZONE 2 -->
            <div id="ad-zone-2" class="mobile-ad-container"></div>

            <div class="section-title"><i class="fas fa-layer-group"></i> Start Working</div>
            
            <!-- AD ZONE 3 -->
            <div id="ad-zone-3" class="mobile-ad-container"></div>

            <div class="session-card" onclick="openSession(1)">
                <div class="session-info">
                    <h3>Session 01</h3>
                    <div id="sess1-earn" class="session-earn">Loading...</div>
                </div>
                <i class="fas fa-play-circle play-icon"></i>
            </div>

            <!-- AD ZONE 4 -->
            <div id="ad-zone-4" class="mobile-ad-container"></div>

            <div class="session-card" onclick="openSession(2)">
                <div class="session-info">
                    <h3>Session 02</h3>
                    <div id="sess2-earn" class="session-earn">Loading...</div>
                </div>
                <i class="fas fa-play-circle play-icon"></i>
            </div>

            <!-- AD ZONE 5 -->
            <div id="ad-zone-5" class="mobile-ad-container"></div>

            <div class="session-card" onclick="openSession(3)">
                <div class="session-info">
                    <h3>Session 03</h3>
                    <div id="sess3-earn" class="session-earn">Loading...</div>
                </div>
                <i class="fas fa-play-circle play-icon"></i>
            </div>

            <div class="card" style="margin-top:20px;">
                <h4 style="margin-bottom:10px; font-size:0.9rem; color:var(--text-sec); text-transform:uppercase;">RULES & GUIDELINES</h4>
                <div id="comp-desc" class="rules-content">
                    Loading rules...
                </div>
                <div id="see-more-trigger" class="see-more-btn" onclick="toggleRules()">See More <i class="fas fa-chevron-down"></i></div>
            </div>

            <!-- AD ZONE 6 -->
            <div id="ad-zone-6" class="mobile-ad-container"></div>

            <div class="section-title"><i class="fas fa-headset"></i> Admin Support</div>
            
            <!-- AD ZONE 7 -->
            <div id="ad-zone-7" class="mobile-ad-container"></div>

            <div id="support-area" class="support-grid">
                <div class="card" style="text-align:center;">Loading...</div>
            </div>
            
            <br><br>
        </div>
    </div>

    <!-- === 3. MODALS === -->

    <!-- Personal Message Modal (NEW) -->
    <div id="personal-msg-modal" class="modal" style="display:none; justify-content:center; align-items:center;">
        <div class="modal-content-box animate-up" style="text-align:center; max-width:350px;">
            <i class="fas fa-envelope-open-text msg-icon"></i>
            <h3 class="msg-title">New Message</h3>
            
            <img id="p-msg-img" src="" class="msg-img">
            
            <div id="p-msg-text" class="msg-body">
                <!-- Message content -->
            </div>
            
            <button class="btn" onclick="closePersonalMsg()" style="background:#333; color:#fff;">OK, Got it</button>
        </div>
    </div>

    <!-- Info Modal -->
    <div id="info-modal" class="modal">
        <div class="modal-content-box animate-up">
            <div class="modal-header">
                <span class="modal-title" id="info-title">Information</span>
                <i class="fas fa-times close-btn" onclick="closeInfo()"></i>
            </div>
            <div id="info-body">Content goes here...</div>
        </div>
    </div>

    <!-- Notification Popup Modal -->
    <div id="popup-modal" class="modal">
        <div class="modal-content-box animate-up">
            <div class="modal-header">
                <span class="modal-title">Notification</span>
                <i class="fas fa-times close-btn" onclick="closePopup()"></i>
            </div>
            <div id="popup-content">
                <img id="popup-img" src="" class="hide">
                <p id="popup-desc">No new notifications.</p>
                <a id="popup-btn" href="#" class="btn" style="display:inline-block; text-decoration:none;">Join Channel</a>
            </div>
        </div>
    </div>

    <!-- Session Modal -->
    <div id="session-modal" class="modal">
        <div class="modal-content-box animate-up">
            <div class="modal-header">
                <span class="modal-title" id="sess-title">Session</span>
                <i class="fas fa-times close-btn" onclick="closeSession()"></i>
            </div>
            
            <!-- AD ZONE 8 -->
            <div id="ad-zone-8" class="mobile-ad-container"></div>

            <div class="card" id="sess-content-html" style="min-height:200px; margin-bottom:20px;">
                <!-- Content -->
            </div>
            <button id="sess-start-btn" class="btn">START TASK <i class="fas fa-arrow-right"></i></button>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content-box animate-up">
            <div class="modal-header">
                <span class="modal-title">Settings</span>
                <i class="fas fa-times close-btn" onclick="closeSettings()"></i>
            </div>
            
            <div style="text-align:center; margin-bottom:30px;">
                <img id="set-pic" src="" style="width:100px; height:100px; border-radius:50%; object-fit:cover; border:3px solid var(--primary); margin-bottom:15px;">
                <div style="display:flex; gap:10px;">
                    <input id="new-pic-url" class="form-control" placeholder="Image URL" style="margin-bottom:0; padding-left:14px;">
                    <button class="btn" style="width:auto; padding:0 20px; margin-top:0;" onclick="updatePic()">Update</button>
                </div>
            </div>

            <div class="card" style="display:flex; justify-content:space-between; align-items:center;">
                <span style="font-weight:600;"><i class="fas fa-moon"></i> Dark Mode</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="dark-toggle" onchange="toggleTheme(this.checked)">
                    <span class="slider"></span>
                </label>
            </div>

            <button class="btn" style="background: #EF4444; color:white; margin-top:30px;" onclick="logout()">Logout Account</button>
        </div>
    </div>

    <!-- Bottom Nav -->
    <div class="bottom-nav">
        <div class="nav-item active">
            <i class="fas fa-home"></i>
            Home
        </div>
        <div class="nav-item" onclick="openSettings()">
            <i class="fas fa-user"></i>
            Profile
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyB5flOMBRX6b_gAx7nicSDGd6iGV_c5AVU",
  authDomain: "fworker-shide.firebaseapp.com",
  databaseURL: "https://fworker-shide-default-rtdb.firebaseio.com",
  projectId: "fworker-shide",
  storageBucket: "gs://ludo-vip-9b3da.appspot.com",
  messagingSenderId: "244655390952",
  appId: "1:244655390952:web:af4176b78f0c34d73dc95d"
};
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let uid = localStorage.getItem('fw_uid');
        let userData = {};
        let isHidden = true; // Default hide
        let popupData = {};
        let configData = {};

        // Default Ad Code
        const defaultAdCode = `<script>
            atOptions = {
                'key' : 'ec484170bacba8bf4dce215bb57b8e90',
                'format' : 'iframe',
                'height' : 50,
                'width' : 320,
                'params' : {}
            };
        <\/script>
        <script src="https://www.highperformanceformat.com/ec484170bacba8bf4dce215bb57b8e90/invoke.js"><\/script>`;

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            // Load Public Config
            db.ref('config').on('value', s => {
                const c = s.val() || {};
                configData = c;

                // Config Mapping
                const logoUrl = c.appLogo || 'https://via.placeholder.com/150';
                document.getElementById('login-logo-img').src = logoUrl;
                document.getElementById('reg-logo-img').src = logoUrl;

                if(c.loginText) document.getElementById('login-desc-text').innerText = c.loginText;
                if(c.notice) document.getElementById('notice-text').innerText = c.notice;
                if(c.rules) document.getElementById('comp-desc').innerText = c.rules;

                if(c.links) {
                    document.getElementById('lnk-fb').href = c.links.fb || '#';
                    document.getElementById('lnk-tg').href = c.links.tg || '#';
                    document.getElementById('lnk-pay').href = c.links.pay || '#';
                    document.getElementById('lnk-yt').href = c.links.yt || '#';
                }

                if(c.sessions) {
                    document.getElementById('sess1-earn').innerText = c.sessions.session1?.price || 'Earn: --';
                    document.getElementById('sess2-earn').innerText = c.sessions.session2?.price || 'Earn: --';
                    document.getElementById('sess3-earn').innerText = c.sessions.session3?.price || 'Earn: --';
                }
                if(c.popup) popupData = c.popup;

                // --- ADVANCED AD LOGIC ---
                // Ad Settings from config
                const adSettings = c.adSettings || { master: true }; // Default Master ON
                const ads = c.ads || {};

                if(adSettings.master !== false) { // If Master is NOT off (so it is On)
                    // Zone 1
                    if(adSettings.zone1 !== false) renderAd('ad-zone-1', ads.zone1 || defaultAdCode);
                    else hideAd('ad-zone-1');
                    
                    // Zone 2
                    if(adSettings.zone2 !== false) renderAd('ad-zone-2', ads.zone2 || defaultAdCode);
                    else hideAd('ad-zone-2');

                    // Zone 3
                    if(adSettings.zone3 !== false) renderAd('ad-zone-3', ads.zone3 || defaultAdCode);
                    else hideAd('ad-zone-3');

                    // Zone 4
                    if(adSettings.zone4 !== false) renderAd('ad-zone-4', ads.zone4 || defaultAdCode);
                    else hideAd('ad-zone-4');

                    // Zone 5
                    if(adSettings.zone5 !== false) renderAd('ad-zone-5', ads.zone5 || defaultAdCode);
                    else hideAd('ad-zone-5');

                    // Zone 6
                    if(adSettings.zone6 !== false) renderAd('ad-zone-6', ads.zone6 || defaultAdCode);
                    else hideAd('ad-zone-6');

                    // Zone 7
                    if(adSettings.zone7 !== false) renderAd('ad-zone-7', ads.zone7 || defaultAdCode);
                    else hideAd('ad-zone-7');

                    // Zone 8
                    if(adSettings.zone8 !== false) renderAd('ad-zone-8', ads.zone8 || defaultAdCode);
                    else hideAd('ad-zone-8');
                } else {
                    // Master Switch is OFF -> Hide ALL
                    document.querySelectorAll('.mobile-ad-container').forEach(el => {
                        el.style.display = 'none';
                        el.innerHTML = '';
                    });
                }
            });

            if(uid) checkStatus();
            else showLogin();
        });

        // --- AD HELPER FUNCTIONS ---
        function renderAd(zoneId, adCode) {
            const container = document.getElementById(zoneId);
            if (!container) return;
            container.style.display = 'flex'; // Show if previously hidden
            container.innerHTML = ''; 
            const iframe = document.createElement('iframe');
            iframe.width = "320"; 
            iframe.height = "60"; 
            iframe.style.border = "0";
            iframe.style.overflow = "hidden";
            container.appendChild(iframe);
            const doc = iframe.contentWindow.document;
            doc.open();
            doc.write(`<html><body style="margin:0;padding:0;display:flex;justify-content:center;align-items:center;">${adCode}</body></html>`);
            doc.close();
        }

        function hideAd(zoneId) {
            const container = document.getElementById(zoneId);
            if(container) {
                container.style.display = 'none';
                container.innerHTML = '';
            }
        }

        function showLogin(){ 
            document.getElementById('login-screen').classList.remove('hide'); 
            document.getElementById('register-screen').classList.add('hide'); 
            document.getElementById('main-app').classList.add('hide');
        }
        function showRegister(){ 
            document.getElementById('login-screen').classList.add('hide'); 
            document.getElementById('register-screen').classList.remove('hide'); 
        }

        // --- Auth ---
        function userRegister() {
            const name = document.getElementById('reg-name').value;
            const fw = document.getElementById('reg-fw').value;
            const email = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-pass').value;
            const pay = document.getElementById('reg-pay').value;
            const proof = document.getElementById('reg-proof').value; 

            if(!name || !email || !pass || !fw || !proof) return alert("Fill all fields including Screenshot Link");

            const newUid = 'user_' + Date.now();
            const data = {
                uid: newUid, name, email, password: pass, fworkerNum: fw,
                paymentNum: pay, 
                screenshotLink: proof, 
                status: 'pending',
                joinedAt: firebase.database.ServerValue.TIMESTAMP
            };

            db.ref('users/' + newUid).set(data).then(() => {
                localStorage.setItem('fw_uid', newUid);
                location.reload();
            });
        }

        function createLink() {
            const hostUrl = configData.imgHostLink || "https://imgbb.com";
            window.open(hostUrl, '_blank');
        }

        async function userLogin() {
            const fwNum = document.getElementById('log-fw').value; 
            const pass = document.getElementById('log-pass').value;
            
            if(!fwNum || !pass) return alert("Please enter Fworker Number and Password");

            const snap = await db.ref('users').orderByChild('fworkerNum').equalTo(fwNum).once('value');
            let found = false;
            snap.forEach(c => {
                const u = c.val();
                if(u.password === pass) {
                    found = true;
                    localStorage.setItem('fw_uid', u.uid);
                    uid = u.uid;
                    checkStatus(); 
                }
            });
            if(!found) alert("Invalid Fworker Number or Password");
        }

        function checkStatus() {
            db.ref('users/' + uid).on('value', s => {
                const u = s.val();
                if(!u) return logout();
                
                userData = u;
                document.querySelectorAll('.full-screen').forEach(e => e.classList.add('hide'));
                
                if(u.status === 'pending') {
                    document.getElementById('pending-screen').classList.remove('hide');
                } else if(u.status === 'blocked') {
                    alert("Account Blocked by Admin"); logout();
                } else if(u.status === 'approved') {
                    loadApp();
                }
            });
        }

        function logout() {
            localStorage.removeItem('fw_uid');
            location.reload();
        }

        // --- Main App Logic ---
        function loadApp() {
            document.getElementById('main-app').classList.remove('hide');
            document.getElementById('main-app').classList.add('animate-up');
            
            // Profile Data
            document.getElementById('head-name').innerHTML = userData.name + ' <i class="fas fa-check-circle verified"></i>';
            document.getElementById('head-pic').src = userData.profilePic || 'https://via.placeholder.com/100';
            document.getElementById('set-pic').src = userData.profilePic || 'https://via.placeholder.com/100';
            
            if(userData.settings && userData.settings.darkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('dark-toggle').checked = true;
            }

            updateSensitiveInfo();
            loadSupport();
            checkPersonalMsg(); // Check for Admin Message
        }

        // --- PERSONAL MESSAGE LOGIC (New) ---
        function checkPersonalMsg() {
            db.ref('users/' + uid + '/inbox_msg').on('value', s => {
                const msg = s.val();
                if(msg) {
                    // Show Modal
                    const modal = document.getElementById('personal-msg-modal');
                    const imgEl = document.getElementById('p-msg-img');
                    
                    if(msg.img) {
                        imgEl.src = msg.img;
                        imgEl.style.display = 'block';
                    } else {
                        imgEl.style.display = 'none';
                    }
                    
                    document.getElementById('p-msg-text').innerHTML = msg.text;
                    modal.style.display = 'flex';
                }
            });
        }

        function closePersonalMsg() {
            // Delete message so it doesn't show again (Mark as read)
            db.ref('users/' + uid + '/inbox_msg').remove();
            document.getElementById('personal-msg-modal').style.display = 'none';
        }

        function toggleHide() {
            isHidden = !isHidden;
            updateSensitiveInfo();
        }

        function updateSensitiveInfo() {
            const emailEl = document.getElementById('display-email');
            const phoneEl = document.getElementById('display-phone');
            const iconEl = document.querySelector('.hide-btn');

            if(isHidden) {
                emailEl.innerText = userData.email.replace(/(.{2})(.*)(?=@)/, "$1***"); 
                phoneEl.innerText = userData.paymentNum.substring(0, 3) + '******' + userData.paymentNum.slice(-2);
                iconEl.className = 'fas fa-eye-slash hide-btn';
            } else {
                emailEl.innerText = userData.email;
                phoneEl.innerText = userData.paymentNum;
                iconEl.className = 'fas fa-eye hide-btn';
            }
        }

        function toggleRules() {
            const content = document.getElementById('comp-desc');
            const btn = document.getElementById('see-more-trigger');
            content.classList.toggle('expanded');
            
            if(content.classList.contains('expanded')) {
                btn.innerHTML = 'See Less <i class="fas fa-chevron-up"></i>';
            } else {
                btn.innerHTML = 'See More <i class="fas fa-chevron-down"></i>';
            }
        }

        function showInfo(type) {
            document.getElementById('info-modal').style.display = 'flex';
            let title = "", text = "";

            if(type === 'privacy') {
                title = "Privacy Policy"; text = configData.privacyPolicy || "Privacy Policy not set by admin.";
            } else if(type === 'about') {
                title = "About Us"; text = configData.aboutUs || "About Us not set by admin.";
            } else if(type === 'rules') {
                title = "Rules & Terms"; text = configData.rules || "Rules not set by admin.";
            }

            document.getElementById('info-title').innerText = title;
            document.getElementById('info-body').innerText = text;
        }
        function closeInfo() { document.getElementById('info-modal').style.display = 'none'; }

        function loadSupport() {
            db.ref('config/support').on('value', s => {
                const d = s.val();
                if(!d) {
                    document.getElementById('support-area').innerHTML = '<p style="grid-column: span 2; text-align:center;">Support Offline</p>';
                    return;
                }
                let html = '';
                ['admin1', 'admin2'].forEach(k => {
                    const adm = d[k];
                    if(adm && adm.name) {
                        html += `
                        <div class="admin-card">
                            <img src="${adm.pic || 'https://via.placeholder.com/50'}" class="admin-pic">
                            <div class="admin-name">${adm.name}</div>
                            <div class="contact-btns">
                                <a href="${adm.wa || '#'}" class="c-btn btn-wa"><i class="fab fa-whatsapp"></i></a>
                                <a href="${adm.tg || '#'}" class="c-btn btn-tg"><i class="fab fa-telegram-plane"></i></a>
                            </div>
                        </div>`;
                    }
                });
                document.getElementById('support-area').innerHTML = html;
            });
        }

        function openSession(num) {
            document.getElementById('session-modal').style.display = 'flex';
            document.getElementById('sess-title').innerText = "Session " + num;
            db.ref(`config/sessions/session${num}`).once('value', s => {
                const d = s.val() || {};
                document.getElementById('sess-content-html').innerHTML = d.html || '<p style="text-align:center; padding:20px;">Content Loading...</p>';
                document.getElementById('sess-start-btn').onclick = () => {
                    if(d.link) window.open(d.link, '_blank');
                    else alert("Link not available");
                };
            });
        }
        function closeSession() { document.getElementById('session-modal').style.display = 'none'; }

        function showPopup() {
            document.getElementById('popup-modal').style.display = 'flex';
            if(popupData.img) {
                document.getElementById('popup-img').src = popupData.img;
                document.getElementById('popup-img').classList.remove('hide');
            } else {
                document.getElementById('popup-img').classList.add('hide');
            }
            document.getElementById('popup-desc').innerText = popupData.desc || "No new updates.";
            document.getElementById('popup-btn').href = popupData.link || "#";
        }
        function closePopup() { document.getElementById('popup-modal').style.display = 'none'; }

        function openSettings() { document.getElementById('settings-modal').style.display = 'flex'; }
        function closeSettings() { document.getElementById('settings-modal').style.display = 'none'; }

        function updatePic() {
            const url = document.getElementById('new-pic-url').value;
            if(url) db.ref(`users/${uid}/profilePic`).set(url).then(()=>alert("Profile Updated!"));
        }

        function toggleTheme(isDark) {
            document.body.classList.toggle('dark-mode', isDark);
            db.ref(`users/${uid}/settings/darkMode`).set(isDark);
        }

    </script>
</body>
</html>
<!-- --- END OF FILE Verification session User Updated (Ad Control + Msg).html --- -->